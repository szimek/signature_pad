/*!
 * Signature Pad v4.1.7 | https://github.com/szimek/signature_pad
 * (c) 2023 Szymon Nowak | Released under the MIT license
 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.SignaturePad=factory());})(this,function(){"use strict";function throttle(fn,wait){let previous=0;let timeout=null;let result;let storedContext;let storedArgs;const later=function(){previous=Date.now();timeout=null;result=fn.apply(storedContext,storedArgs);if(!timeout){storedContext=null;storedArgs=[];}};return function wrapper(...args){const now=Date.now();const remaining=wait-(now-previous);storedContext=this;storedArgs=args;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}previous=now;result=fn.apply(storedContext,storedArgs);if(!timeout){storedContext=null;storedArgs=[];}}else if(!timeout){timeout=setTimeout(later,remaining);}return result;};}class SignaturePad{constructor(canvas,options={}){this.canvas=canvas;this.options=options;this._handleMouseDown=this._handleMouseDown.bind(this);this._handleMouseMove=this._handleMouseMove.bind(this);this._handleMouseUp=this._handleMouseUp.bind(this);this._handleTouchStart=this._handleTouchStart.bind(this);this._handleTouchMove=this._handleTouchMove.bind(this);this._handleTouchEnd=this._handleTouchEnd.bind(this);this.velocityFilterWeight=options.velocityFilterWeight||.7;this.minWidth=options.minWidth||.5;this.maxWidth=options.maxWidth||2.5;this.throttle=typeof options.throttle==="number"?options.throttle:16;this.minDistance=options.minDistance||5;this.dotSize=options.dotSize||function(){return(this.minWidth+this.maxWidth)/2;};this.penColor=options.penColor||"black";this.backgroundColor=options.backgroundColor||"rgba(0,0,0,0)";this.onBegin=options.onBegin;this.onEnd=options.onEnd;this._ctx=canvas.getContext("2d");this.clear();this._strokeMoveUpdate=this.throttle?throttle(SignaturePad.prototype._strokeUpdate,this.throttle):SignaturePad.prototype._strokeUpdate;this._handleMouseEvents();this._handleTouchEvents();}clear(){const ctx=this._ctx;const canvas=this.canvas;ctx.fillStyle=this.backgroundColor;ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillRect(0,0,canvas.width,canvas.height);this._data=[];this._reset();this._isEmpty=true;}toDataURL(type="image/png",encoderOptions){return this.canvas.toDataURL(type,encoderOptions);}fromDataURL(dataUrl){const image=new Image();const ratio=Math.max(window.devicePixelRatio||1,1);const width=this.canvas.width/ratio;const height=this.canvas.height/ratio;this._reset();image.onload=()=>{this._ctx.drawImage(image,0,0,width,height);};image.src=dataUrl;this._isEmpty=false;}toData(){return this._data;}fromData(points){this.clear();this._fromData(points);this._data=points;}isEmpty(){return this._isEmpty;}off(){this.canvas.removeEventListener("mousedown",this._handleMouseDown);this.canvas.removeEventListener("mousemove",this._handleMouseMove);document.removeEventListener("mouseup",this._handleMouseUp);this.canvas.removeEventListener("touchstart",this._handleTouchStart);this.canvas.removeEventListener("touchmove",this._handleTouchMove);document.removeEventListener("touchend",this._handleTouchEnd);}on(){this._handleMouseEvents();this._handleTouchEvents();}set(...){/* omitted: shortened for brevity, this line continues normally */}}return SignaturePad;});
